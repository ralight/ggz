#MIN_CONFIG

dnl Checking for GGZ
dnl ================
AC_ARG_WITH(ggz-config,[  --with-ggz-config=PATH  Path to ggz-config (optional)],
            ggz_config="$withval", ggz_config="no")


if test "$ggz_config" != "no"; then
   AC_CHECK_FILE($ggz_config, GGZ_CONFIG=$ggz_config, 
			      AC_MSG_WARN(*** Specifed ggz-config not found -- searching path) 
			      ggz_config=no)
fi

if test "$ggz_config" = "no"; then
   AC_PATH_PROGS(GGZ_CONFIG, ggz-config, no)
fi

if test "$GGZ_CONFIG" = "no"; then
   AC_MSG_ERROR(*** Couldn't find ggz-config)
fi

AC_CHECK_LIB(ggzcore, ggzcore_server_new,
    AC_CHECK_HEADER(ggzcore.h, LDADD="$LDADD -lggzcore -leasysock",
        AC_MSG_ERROR(*** Cannot find ggzcore.h header)),
AC_MSG_ERROR(*** Cannot find ggzcore library ), -leasysock)

dnl Various dirs
dnl ============

ggzexecmoddir=`$GGZ_CONFIG --gamedir`
AC_DEFINE_UNQUOTED(GAMEDIR, "${ggzexecmoddir}", [Path where to install the games])

ggzdatadir=`$GGZ_CONFIG --datadir`
AC_DEFINE_UNQUOTED(GGZDATADIR, "${ggzdatadir}", [Path where the games should look for their data files])

packagesrcdir=`cd $srcdir && pwd`
AC_DEFINE_UNQUOTED(PACKAGE_SOURCE_DIR, "${packagesrcdir}", [Path where the source is located])

AC_SUBST(LDADD)
AC_SUBST(ggzexecmoddir)
AC_SUBST(ggzdatadir)
AC_SUBST(packagesrcdir)

dnl Image readers/writers
KDE_CHECK_KIMGIO
