////////////////////////////////////////////////////////////////////////////
//                                                                        //
// The Netmap C++ Class Library                                           //
//                                                                        //
// Copyright (C) 2001 Josef Spillner                                      //
// dr_maux@users.sourceforge.net                                          //
// The MindX Open Source Project                                          //
// http://mindx.sourceforge.net/development/netmap                        //
//                                                                        //
// Published under GNU GPL conditions                                     //
//                                                                        //
////////////////////////////////////////////////////////////////////////////

#ifndef NETMAP_RESOURCE_FILE_TEXT
#define NETMAP_RESOURCE_FILE_TEXT

// Netmap include files
#include <NetmapResourceFile>

// C++ include files
#include <fstream>
#include <string>

/**
	This is a class inherited from @ref NetmapResource. It handles the actual input from a map
	and provides the Resource Manager with exact tile information.
*/

class NetmapResourceFileText : public NetmapResourceFile
{
	public:
		/** Constructor */
		NetmapResourceFileText();

		/** Destructor */
		~NetmapResourceFileText();

		/** Open a map file locally. Such files do only contain raw data. */
		void openFile(char *filename);

		/** Close an open file. */
		void closeFile();

		/** Specify the x and y coordinates to read one tile. */
		Ntile *readTileAbsolute(Ncoord x, Ncoord y);

		/** Read a tile relative to the specified Vtile. */
		Ntile *readTileRelative(Ncoord vx, Ncoord vy, Ncoord x, Ncoord y);

		/** Specify the vx and vy coordinates to read one vtile. */
		Nvtile *readVtileAbsolute(Ncoord vx, Ncoord vy);
	private:
		/** The iostream file handler. */
		ifstream m_stream;

		/** Temporary buffer values */
		Ntile *tile;
		Nvtile *vtile;
		string m_filename;
};

#endif
