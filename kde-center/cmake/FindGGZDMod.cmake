SET(GGZDMOD_FOUND FALSE)

FIND_PROGRAM(PKGCONFIG_EXECUTABLE NAMES pkg-config PATHS /usr/bin/ /usr/local/bin)
EXEC_PROGRAM(${PKGCONFIG_EXECUTABLE} ARGS 'ggzdmod >= snapshot-0.99.4' RETURN_VALUE _return)
if(_return STREQUAL "0")
  SET(GGZDMOD_FOUND TRUE)
endif(_return STREQUAL "0")

if(GGZDMOD_FOUND)
  EXEC_PROGRAM(${PKGCONFIG_EXECUTABLE} ARGS --libs ggzdmod OUTPUT_VARIABLE GGZDMOD_LIBRARY)
  EXEC_PROGRAM(${PKGCONFIG_EXECUTABLE} ARGS --variable=includedir ggzdmod OUTPUT_VARIABLE GGZDMOD_INCLUDES)
  MESSAGE(STATUS "Found ggzdmod (library ${GGZDMOD_LIBRARY}, headers ${GGZDMOD_INCLUDES}).")
else(GGZDMOD_FOUND)
  MESSAGE(STATUS "Could not find ggzdmod. Game servers will be disable.")
endif(GGZDMOD_FOUND)
