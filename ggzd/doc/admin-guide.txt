Administrator's Guide to the GGZ Gaming Zone (GGZ)
--------------------------------------------------

# This document is currently not maintained.
# Please have a look at the GGZ Hosting Guide
# for more up-to-date information.

Webpage:  http://www.ggzgamingzone.org/
Authors:  Brent Hendricks <bmh@users.sourceforge.net>
          Justin Zaun <jzaun@telerama.com>
          Rich Gade <rgade@users.sourceforge.net>
          Doug Hudson <djh@users.sourceforge.net>

Welcome
-------

Welcome to the exciting new world of (no that sounds entirely too
silly.......

[Take Two]

This document is not a complete guide to running a GGZ server.  It is
assumed that you are a competent system administrator and can figure
any number of things out for yourself!  However, it does attempt to
point you in the directions you need to be pointed in order to
configure a useful game server.

This document does not cover the topic of installing the GGZ server,
as that information can be found in the INSTALL file located in the
top level of the source tree.


Pre-Installation
----------------

Before installing ggzd, run ./configure with appropriate pathname
overrides where necessary.  Some pathnames you may wish to override
are as follows:
    --prefix		The overall prefix for the installation,
			usually /usr, defaults to /usr/local
    --sysconfdir	The system config directory.  Defaults to
			$(prefix)/etc.  If you set prefix to /usr
			you will usually want to set sysconfdir
			to strictly /etc.
    --with-tmpdir	This is where temporary UNIX sockets will
			be created for game communications.  It
			defaults to /tmp/ggzd and this is usually
			a very good choice.

You will also need to choose which database type is appropriate for
your system.  Currently the libdb2 and libdb3 interfaces are supported
by the server.  The default support is for db2, db3 support can be
specified with the '--with-database=db3' configuration option.

Your UNIX distribution may include support for both db2 and db3 - however
I've found that usually only one or the other will work in practice.
If you find that you cannot reliably login to your ggzd server after
setup, then you are probably using the wrong database type!  For instance
my RedHat 7 setup supports both db2 and db3, however if I compile ggzd
with the default db2 support, I cannot login to my own server!


Post-Installation
-----------------

The GGZ server will install with several sample configuration files
that will enable you to run a basic server with four rooms and four
games.  Totally usable, but how dull...

You want more rooms (easy) and more games (wait for the next version
or you are more than welcome to write one please!).  Both require a
bit of setting up.

First you will need to locate the system-wide configuration file
ggzd.conf.  If you installed the server from the RPM then it should be
in /etc/ggzd.  If you compiled the server yourself, then it will be
located in (prefix)/etc/ggzd where (prefix) is /usr/local (unless you
changed it via configure).

Open up ggzd.conf in your favorite text editor.  It is heavily
commented and should be entirely self-explanatory!  Use this file to
specify all the extra features and such that you wish to use.


How to Configure the Message Of The Day
---------------------------------------

Upon successful login of a player, the GGZ server can send them a
Message Of the Day (MOTD).  The default message of the day file is
named ggzd.motd and is stored in the configuration directory with the
ggzd.conf file.  It is simply a series of text lines which you can
create with any text editor.  The system is pre-compiled to specify a
maximum of 80 lines for this file.  You can override this in the
ggzd.h file (MAX_MOTD_LINES).

There are many % specifiers you can place in the motd file.  These will
be automatically replaced when sent to a client by:

	%a - Server administrator's name
	%C - Server CPU type
	%d - Current server date
	%e - Server administrator's email address
	%g - Current number of game tables
	%G - Current number of game tables with free seats
	%h - Server's hostname
	%o - Server's OS name
	%p - Port number server is listening on
	%t - Server's local time
	%u - Current GGZ server uptime
	%U - Current number of user's on GGZ
	%v - GGZ server version number

We have provided you with a sample MOTD file, but using these, you can
create your own highly sophisticated message of the day.


How To Add A Room
-----------------

Games on the GGZ server take place in "rooms" By default, we provide
you with a single room for each game type, but adding a room couldn't
be easier.  By default, the ggzd.conf file will specify that the
server should utilitze _all_ available rooms.  So now the question
becomes, how do I make a room available?

In the configuration directory (where you found ggzd.conf and
ggzd.motd) you will find a subdirectory named 'rooms'.  Inside this
subdirectory are a number of '*.room' files.  Each .room file
specifies a different room, and by default each one of them will be
loaded.

Again, the sample files are self-explanatory.  To create a new room,
simply copy one of the existing room files to a new file and edit the
values as you see fit.


How To Add A Game-Type
----------------------

Currently there are no user-installable game types.  All the games
that are compliant with GGZ (that we know of) are included with GGZ at
this time.  However, in the configuration directory, there is a
'games' subdirectory.  Inside this subdirectory are a number of
'*.dsc' files.  Each .dsc file specifies a different game type, and by
default each one of them will be loaded.  This is where you would put
a new game type if you had (ahem: wrote) one.

In the future it will be very simple to install a new game module, and
you can do it without recompiling your server.  Simple put a .dsc file
in the aforementioned 'games' dir describing the game, and then put
the server module in the appropriate directory (usually
(prefix)/lib/ggzd)


Setting Up Logs
---------------

You will no doubt want to log your GGZ server's activity.  Setting up
logging, and the details to log, to a file is almost completely
self-explanatory in the ggzd.conf file.  Setting up loggining via the
syslog facility may be less than obvious.

Logging via syslogd is the default unless you specify a log file
(either in ggzd.conf or on the command line).  By default, log entries
from the GGZ server will go to the facility local0.  This can be
specified in ggzd.conf.

You will however, need to setup your /etc/syslog.conf file to log those
messages from facility local0 (or whatever you choose) into a specific
file, probably /var/log/ggzd.

If you compiled the GGZ server with debugging enabled, it will
generate extra information which you may want to go to a separate
file.  If you are are not using syslog then this is configurable in
ggzd.conf.  If you *are* using syslog, here is a convenient set of
syslog.conf entries to separate debug messages from standard log
messages:

local0.info	/var/log/ggzd.log
local0.=debug	/var/log/ggzd.debug

Put those two lines into your syslog.conf, restart syslogd and your log
nightmares are over!


Moving Things Around
--------------------

After installation, you may find it necessary to move pieces of the
installation around.  For instance, say you had installed the game and
room descriptions in the default locations (/usr/local/etc/ggzd/games
and /usr/local/etc/ggzd/rooms for the source distribution).  Both of
these subdirectories must exist under a specific directory, but that
directory can be chosen at run time by altering the ggzd.conf file's
ConfDir specification.

The GameDir in ggzd.conf specifies where the game server modules can
be located by the GGZ server.  However, if you had a new game that was
installed in a separate directory, you could specify the path to that
server by altering that game description file.

You can rename the MOTD file to whatever you like, simply override the
MOTD entry in the ggzd.conf file.

Most entries in the configuration file have a default directory.
However, if you start your entry with a / then it will override that
default.  You can, for instance, put the MOTD file in
/var/share/ggzd/motd by specifying

MOTD=/var/share/ggzd/motd

in the ggzd.conf file.


Conclusion
----------

Hopefully this document will get you started exploring on your own the
many ways that you can configure your GGZ server.  Please give us your
comments, enhancement suggestions and general gripes through a forum
on our web page, the ggz-dev mailing list, or by sending an email to
one of the authors.

Thanks,
The GGZ Development Team
ggz-dev@mail.ggzgamingzone.org

