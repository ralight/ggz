Index: src/ksquaresui.rc
===================================================================
--- src/ksquaresui.rc	(Revision 839281)
+++ src/ksquaresui.rc	(Arbeitskopie)
@@ -11,6 +11,7 @@
 	<MenuBar>
 	<Menu noMerge="1" name="onlinegame">
 		<text>Online game</text>
+		<Action name="connection" />
 		<Action name="rankings" />
 		<Action name="seats" />
 	</Menu>
Index: src/ksquareswindow.h
===================================================================
--- src/ksquareswindow.h	(Revision 839281)
+++ src/ksquareswindow.h	(Arbeitskopie)
@@ -22,6 +22,7 @@
 class GameBoardScene;
 class KGGZRankingsDialog;
 class KGGZSeatsDialog;
+class KGGZCoreLayer;
 
 /**
  * @short Mainwindow class
@@ -60,6 +61,8 @@
 		void slotMoveRequest(int x1, int y1, int x2, int y2);
 		void slotRankingsRequest();
 		void slotSeatsRequest();
+		void slotConnection();
+		void slotConnectionReady();
 
 	private:
 		enum StatusBarItem
@@ -70,6 +73,7 @@
 
 		//void setupAccel();
 		void setupActions();
+		void initGGZ();
 		Ui::prefs_ai ui_prefs_ai;
 		Ui::prefs_display ui_prefs_display;
 		///The game board view
@@ -85,6 +89,7 @@
 		//Network scores and player list
 		KGGZRankingsDialog *m_rankingsdlg;
 		KGGZSeatsDialog *m_seatsdlg;
+		KGGZCoreLayer *m_corelayer;
 
 		//KToggleAction *m_toolbarAction;
 		//KToggleAction *m_statusbarAction;
Index: src/CMakeLists.txt
===================================================================
--- src/CMakeLists.txt	(Revision 839281)
+++ src/CMakeLists.txt	(Arbeitskopie)
@@ -22,7 +22,7 @@
 kde4_add_app_icon(ksquares_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/hi*-app-ksquares.png")
 kde4_add_executable(ksquares ${ksquares_SRCS})
 
-target_link_libraries(ksquares ${KDE4_KDEUI_LIBS} kdegames ${KGGZGAMES_LIBS})
+target_link_libraries(ksquares ${KDE4_KDEUI_LIBS} kdegames ${KGGZGAMES_LIBS} kggzlib)
 
 install(TARGETS ksquares ${INSTALL_TARGETS_DEFAULT_ARGS})
 
Index: src/ksquareswindow.cpp
===================================================================
--- src/ksquareswindow.cpp	(Revision 839281)
+++ src/ksquareswindow.cpp	(Arbeitskopie)
@@ -31,6 +31,9 @@
 #include <kggzmod/module.h>
 #include <kggzgames/kggzrankingsdialog.h>
 #include <kggzgames/kggzseatsdialog.h>
+#include <kggzlib/connectiondialog.h>
+#include <kggzlib/kggzcorelayer.h>
+#include <kggzcore/player.h>
 
 //generated
 #include "settings.h"
@@ -43,16 +46,14 @@
 #include "newgamedialog.h"
 #include "scoresdialog.h"
 
-KSquaresWindow::KSquaresWindow() : KXmlGuiWindow(), m_view(new GameBoardView(this)), m_scene(0), m_proto(0), m_rankingsdlg(0), m_seatsdlg(0)
+KSquaresWindow::KSquaresWindow() : KXmlGuiWindow(), m_view(new GameBoardView(this)), m_scene(0), m_proto(0), m_rankingsdlg(0), m_seatsdlg(0), m_corelayer(0)
 {
 	setCentralWidget(m_view);
 	QTimer::singleShot(0, this, SLOT(initObject()));
 
 	if(KGGZMod::Module::isGGZ())
 	{
-		KGGZMod::Module *mod = new KGGZMod::Module("ksquares");
-		connect(mod, SIGNAL(signalNetwork(int)), SLOT(slotNetworkData(int)));
-		connect(mod, SIGNAL(signalError()), SLOT(slotNetworkError()));
+		initGGZ();
 	}
 }
 
@@ -64,6 +65,13 @@
 	delete sGame;
 }
 
+void KSquaresWindow::initGGZ()
+{
+	KGGZMod::Module *mod = new KGGZMod::Module("ksquares");
+	connect(mod, SIGNAL(signalNetwork(int)), SLOT(slotNetworkData(int)));
+	connect(mod, SIGNAL(signalError()), SLOT(slotNetworkError()));
+}
+
 void KSquaresWindow::initObject()
 {
 	sGame = new KSquaresGame();
@@ -329,6 +337,10 @@
 	KStandardGameAction::gameNew(this, SLOT(gameNew()), actionCollection());
 	KAction *resetGame = KStandardGameAction::restart(this, SLOT(gameReset()), actionCollection());
 
+	KAction *a_connection = new KAction(this);
+	a_connection->setText(i18n("Connect to GGZ Gaming Zone"));
+	actionCollection()->addAction("connection", a_connection);
+
 	KAction *a_rankings = new KAction(this);
 	a_rankings->setText(i18n("Online rankings"));
 	actionCollection()->addAction("rankings", a_rankings);
@@ -344,6 +356,8 @@
 
 		KStandardGameAction::highscores(this, SLOT(showHighscores()), actionCollection());
 
+		connect(a_connection, SIGNAL(triggered(bool)), SLOT(slotConnection()));
+
 		a_rankings->setEnabled(false);
 		a_seats->setEnabled(false);
 	}
@@ -353,6 +367,8 @@
 
 		connect(a_rankings, SIGNAL(triggered(bool)), SLOT(slotRankingsRequest()));
 		connect(a_seats, SIGNAL(triggered(bool)), SLOT(slotSeatsRequest()));
+
+		a_connection->setEnabled(false);
 	}
 
 	KStandardGameAction::quit(this, SLOT(close()), actionCollection());
@@ -523,4 +539,25 @@
 	m_seatsdlg->show();
 }
 
+void KSquaresWindow::slotConnection()
+{
+	ConnectionDialog dialog(this);
+	dialog.exec();
+	if(!m_corelayer)
+	{
+		m_corelayer = new KGGZCoreLayer(this, "Dots", "4");
+		connect(m_corelayer, SIGNAL(signalReady()), SLOT(slotConnectionReady()));
+	}
+	m_corelayer->ggzcore(dialog.uri());
+}
+
+void KSquaresWindow::slotConnectionReady()
+{
+	QList<KGGZCore::Player> seats;
+	seats << KGGZCore::Player("somebot", KGGZCore::Player::bot);
+	m_corelayer->configureTable(seats);
+
+	initGGZ();
+}
+
 #include "ksquareswindow.moc"
